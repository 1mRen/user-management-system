import{e as W}from"./chunk-63GHBJUO.js";import{b,e as Q}from"./chunk-UYVSYKOO.js";import{$ as T,A as i,B as t,C as p,Da as G,Fa as B,G as N,H as u,Ha as z,Ia as H,Ja as J,Ka as g,L as r,La as K,Ma as I,N as w,P as U,T as M,U as f,ba as k,ea as P,j as E,ma as L,n as h,na as v,oa as F,p as _,pa as q,q as S,ra as A,ta as D,u as o,v as c,w as d,wa as R,x as a,xa as j,ya as O,za as V}from"./chunk-ZYNGRVCC.js";var ie=()=>({exact:!0}),Y=(()=>{class e{static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275cmp=_({type:e,selectors:[["ng-component"]],decls:10,vars:2,consts:[[1,"p-4"],[1,"container"],[1,"row"],[1,"col-sm-12","mb-4"],[1,"nav","nav-tabs"],["routerLink","/profile","routerLinkActive","active",1,"nav-item","nav-link",3,"routerLinkActiveOptions"],["routerLink","/profile/update","routerLinkActive","active",1,"nav-item","nav-link"]],template:function(s,n){s&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"nav",4)(5,"a",5),r(6,"Profile"),t(),i(7,"a",6),r(8,"Update Profile"),t()()()(),p(9,"router-outlet"),t()()),s&2&&(o(5),a("routerLinkActiveOptions",M(1,ie)))},dependencies:[H,g,K],encapsulation:2})}}return e})();var Z=(()=>{class e{constructor(m){this.accountService=m,this.account=this.accountService.accountValue}static{this.\u0275fac=function(s){return new(s||e)(c(b))}}static{this.\u0275cmp=_({type:e,selectors:[["ng-component"]],decls:13,vars:4,consts:[["routerLink","update"]],template:function(s,n){s&1&&(i(0,"h1"),r(1,"My Profile"),t(),p(2,"br"),i(3,"strong"),r(4,"Name: "),t(),r(5),p(6,"br"),i(7,"strong"),r(8,"Email: "),t(),r(9),i(10,"p")(11,"a",0),r(12,"Update Profile"),t()()),s&2&&(o(5),U(" ",n.account.title," ",n.account.firstName," ",n.account.lastName,""),o(4),w(" ",n.account.email," "))},dependencies:[g],encapsulation:2})}}return e})();var C=e=>({"is-invalid":e});function re(e,l){e&1&&(i(0,"div"),r(1,"Title is required"),t())}function oe(e,l){if(e&1&&(i(0,"div",18),d(1,re,2,0,"div",19),t()),e&2){let m=u();o(),a("ngIf",m.f.title.errors.required)}}function ae(e,l){e&1&&(i(0,"div"),r(1,"First Name is required"),t())}function me(e,l){if(e&1&&(i(0,"div",18),d(1,ae,2,0,"div",19),t()),e&2){let m=u();o(),a("ngIf",m.f.firstName.errors.required)}}function se(e,l){e&1&&(i(0,"div"),r(1,"Last Name is required"),t())}function le(e,l){if(e&1&&(i(0,"div",18),d(1,se,2,0,"div",19),t()),e&2){let m=u();o(),a("ngIf",m.f.lastName.errors.required)}}function de(e,l){e&1&&(i(0,"div"),r(1,"Email is required"),t())}function pe(e,l){e&1&&(i(0,"div"),r(1,"Email must be a valid email address"),t())}function ce(e,l){if(e&1&&(i(0,"div",18),d(1,de,2,0,"div",19)(2,pe,2,0,"div",19),t()),e&2){let m=u();o(),a("ngIf",m.f.email.errors.required),o(),a("ngIf",m.f.email.errors.email)}}function ue(e,l){e&1&&(i(0,"div"),r(1,"Password is required"),t())}function fe(e,l){e&1&&(i(0,"div"),r(1," Password must be at least 6 characters "),t())}function ve(e,l){if(e&1&&(i(0,"div",18),d(1,ue,2,0,"div",19)(2,fe,2,0,"div",19),t()),e&2){let m=u();o(),a("ngIf",m.f.password.errors.required),o(),a("ngIf",m.f.password.errors.minlength)}}function _e(e,l){e&1&&(i(0,"div"),r(1,"Confirm Password is required"),t())}function ge(e,l){e&1&&(i(0,"div"),r(1,"Passwords must match"),t())}function Ce(e,l){if(e&1&&(i(0,"div",18),d(1,_e,2,0,"div",19)(2,ge,2,0,"div",19),t()),e&2){let m=u();o(),a("ngIf",m.f.confirmPassword.errors.required),o(),a("ngIf",m.f.confirmPassword.errors.mustMatch)}}function he(e,l){e&1&&p(0,"span",20)}function Se(e,l){e&1&&p(0,"span",20)}var $=(()=>{class e{constructor(m,s,n,x,te){this.formBuilder=m,this.route=s,this.router=n,this.accountService=x,this.alertService=te,this.account=this.accountService.accountValue,this.loading=!1,this.submitted=!1,this.deleting=!1}ngOnInit(){this.form=this.formBuilder.group({title:[this.account.title,v.required],firstName:[this.account.firstName,v.required],lastName:[this.account.lastName,v.required],email:[this.account.email,[v.required,v.email]],password:["",[v.minLength(6)]],confirmPassword:[""]},{validator:W("password","confirmPassword")})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.update(this.account.id,this.form.value).pipe(E()).subscribe({next:()=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})},error:m=>{this.alertService.error(m),this.loading=!1}}))}onDelete(){confirm("Are you sure?")&&(this.deleting=!0,this.accountService.delete(this.account.id).pipe(E()).subscribe(()=>{this.alertService.success("Account deleted successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/profile"])}))}static{this.\u0275fac=function(s){return new(s||e)(c(G),c(z),c(J),c(b),c(Q))}}static{this.\u0275cmp=_({type:e,selectors:[["ng-component"]],decls:53,vars:29,consts:[[3,"ngSubmit","formGroup"],[1,"form-group"],["formControlName","title",1,"form-control",3,"ngClass"],["value",""],["value","Mr"],["value","Mrs"],["value","Ms"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","col-5"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click","disabled"],["routerLink","/profile",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(s,n){s&1&&(i(0,"h1"),r(1,"Update Profile"),t(),i(2,"form",0),N("ngSubmit",function(){return n.onSubmit()}),i(3,"div",1)(4,"label"),r(5,"Title"),t(),i(6,"select",2),p(7,"option",3),i(8,"option",4),r(9,"Mr"),t(),i(10,"option",5),r(11,"Mrs"),t(),i(12,"option",6),r(13,"Ms"),t()(),d(14,oe,2,1,"div",7),t(),i(15,"div",8)(16,"label"),r(17,"First Name"),t(),p(18,"input",9),d(19,me,2,1,"div",7),t(),i(20,"div",8)(21,"label"),r(22,"Last Name"),t(),p(23,"input",10),d(24,le,2,1,"div",7),t(),i(25,"div",1)(26,"label"),r(27,"Email"),t(),p(28,"input",11),d(29,ce,3,2,"div",7),t(),i(30,"h3"),r(31,"Change Password"),t(),i(32,"p"),r(33,"Leave blank to keep the same password"),t(),i(34,"div",1)(35,"label"),r(36,"Password"),t(),p(37,"input",12),d(38,ve,3,2,"div",7),t(),i(39,"div",1)(40,"label"),r(41,"Confirm Password"),t(),p(42,"input",13),d(43,Ce,3,2,"div",7),t(),i(44,"div",1)(45,"button",14),d(46,he,1,0,"span",15),r(47," Save "),t(),i(48,"button",16),N("click",function(){return n.onDelete()}),d(49,Se,1,0,"span",15),r(50," Delete "),t(),i(51,"a",17),r(52,"Cancel"),t()()()),s&2&&(o(2),a("formGroup",n.form),o(4),a("ngClass",f(17,C,n.submitted&&n.f.title.errors)),o(8),a("ngIf",n.submitted&&n.f.title.errors),o(4),a("ngClass",f(19,C,n.submitted&&n.f.firstName.errors)),o(),a("ngIf",n.submitted&&n.f.firstName.errors),o(4),a("ngClass",f(21,C,n.submitted&&n.f.lastName.errors)),o(),a("ngIf",n.submitted&&n.f.lastName.errors),o(4),a("ngClass",f(23,C,n.submitted&&n.f.email.errors)),o(),a("ngIf",n.submitted&&n.f.email.errors),o(8),a("ngClass",f(25,C,n.submitted&&n.f.password.errors)),o(),a("ngIf",n.submitted&&n.f.password.errors),o(4),a("ngClass",f(27,C,n.submitted&&n.f.confirmPassword.errors)),o(),a("ngIf",n.submitted&&n.f.confirmPassword.errors),o(2),a("disabled",n.loading),o(),a("ngIf",n.loading),o(2),a("disabled",n.loading),o(),a("ngIf",n.deleting))},dependencies:[T,k,A,O,V,L,j,F,q,D,R,g],encapsulation:2})}}return e})();var be=[{path:"",component:Y,children:[{path:"",component:Z},{path:"update",component:$}]}],ee=(()=>{class e{static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=h({imports:[I.forChild(be),I]})}}return e})();var ze=(()=>{class e{static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=h({imports:[P,B,ee]})}}return e})();export{ze as ProfileModule};
