import{a as h,b as s}from"./chunk-4EMUCHMP.js";import{Fa as m,e as l,h as d,l as i,n as o}from"./chunk-U6ZOIJ5K.js";function T(t){return()=>new Promise(c=>{t.refreshToken().subscribe({next:()=>c(!0),error:()=>c(!1),complete:()=>c(!0)})})}var v=(()=>{class t{constructor(e){this.accountService=e}intercept(e,n){return n.handle(e).pipe(d(r=>{[401,403].includes(r.status)&&this.accountService.accountValue&&this.accountService.logout();let a=r&&r.error&&r.error.message||r.statusText;return console.error(r),l(a)}))}static{this.\u0275fac=function(n){return new(n||t)(o(s))}}static{this.\u0275prov=i({token:t,factory:t.\u0275fac})}}return t})();var A=(()=>{class t{constructor(e){this.accountService=e}intercept(e,n){let r=this.accountService.accountValue,a=r&&r.jwtToken,u=e.url.startsWith(h.apiUrl);return console.log(`Request to: ${e.url}`),console.log(`Is API URL: ${u}, Is Logged In: ${a}`),a&&u?(console.log(`Adding JWT token for user: ${r.email}, Role: ${r.role}`),e=e.clone({setHeaders:{Authorization:`Bearer ${r.jwtToken}`}})):u&&console.log("No JWT token available for API request"),n.handle(e)}static{this.\u0275fac=function(n){return new(n||t)(o(s))}}static{this.\u0275prov=i({token:t,factory:t.\u0275fac})}}return t})();function j(t,c){return e=>{let n=e.controls[t],r=e.controls[c];r.errors&&!r.errors.mustMatch||(n.value!==r.value?r.setErrors({mustMatch:!0}):r.setErrors(null))}}var x=(()=>{class t{constructor(e,n){this.router=e,this.accountService=n}canActivate(e,n){let r=this.accountService.accountValue;return r?e.data.roles&&!e.data.roles.includes(r.role)?(this.router.navigate(["/"]),!1):!0:(this.router.navigate(["/account/login"],{queryParams:{returnUrl:n.url}}),!1)}static{this.\u0275fac=function(n){return new(n||t)(o(m),o(s))}}static{this.\u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var k="angular-17-signup-verification-boilerplate-accounts",V=JSON.parse(localStorage.getItem(k)||"[]");export{T as a,x as b,v as c,A as d,j as e};
