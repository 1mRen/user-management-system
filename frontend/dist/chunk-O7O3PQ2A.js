import{a as d}from"./chunk-UYVSYKOO.js";import{e as p,fa as h,ga as c,h as r,k as s,l as n,m as a,o as l}from"./chunk-ZYNGRVCC.js";var $=(()=>{class i{constructor(t){this.http=t,this.apiUrl=`${d.apiUrl}/requests`,console.log("RequestService initialized with API URL:",this.apiUrl)}handleError(t){if(console.error("API Error:",t),t.error instanceof ErrorEvent)console.error("Client-side error:",t.error.message);else if(console.error(`Backend returned code ${t.status}, body was: ${JSON.stringify(t.error)}`),t.status===401)return p(()=>new Error("Authentication error. Please log in again."));return p(()=>new Error("Something went wrong. Please try again later."))}getHttpOptions(){return{headers:new h({"Content-Type":"application/json"}),withCredentials:!0}}getAll(){return console.log("Making API request to:",this.apiUrl),this.http.get(this.apiUrl,this.getHttpOptions()).pipe(s(2),n(t=>console.log("Received data:",t)),r(this.handleError))}getById(t){return console.log(`Getting request details for ID: ${t}`),this.http.get(`${this.apiUrl}/${t}`,this.getHttpOptions()).pipe(s(1),n(e=>console.log("Received request details:",e)),r(this.handleError))}create(t){console.log("Creating request with data:",t);let e=this.getHttpOptions();return console.log("Request API URL:",this.apiUrl),console.log("Request HTTP options:",e),this.http.post(this.apiUrl,t,e).pipe(s(1),n(o=>console.log("Create response:",o)),r(o=>(console.error("Error creating request:",o),this.handleError(o))))}update(t,e){return this.http.put(`${this.apiUrl}/${t}`,e,this.getHttpOptions()).pipe(r(this.handleError))}delete(t){return this.http.delete(`${this.apiUrl}/${t}`,this.getHttpOptions()).pipe(r(this.handleError))}approve(t,e){return this.http.put(`${this.apiUrl}/${t}`,{status:"approved",details:e?{comments:e}:void 0},this.getHttpOptions()).pipe(r(this.handleError))}reject(t,e){return this.http.put(`${this.apiUrl}/${t}`,{status:"rejected",details:{reason:e}},this.getHttpOptions()).pipe(r(this.handleError))}static{this.\u0275fac=function(e){return new(e||i)(l(c))}}static{this.\u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{$ as a};
