import{e as K}from"./chunk-NWB3Q6K6.js";import{b,e as J}from"./chunk-4EMUCHMP.js";import{$ as T,A as t,B as p,Ba as O,Da as B,Ea as z,F as N,Fa as H,G as u,Ga as S,Ia as I,K as r,M as w,O as M,T as f,Z as U,ba as P,ia as F,j as x,ja as v,ka as q,la as D,m as C,na as k,o as _,p as h,pa as L,sa as R,t as o,ta as j,u as c,ua as A,v as d,va as V,w as m,z as i,za as G}from"./chunk-U6ZOIJ5K.js";var W=(()=>{class e{static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275cmp=_({type:e,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(s,n){s&1&&(i(0,"div",0)(1,"div",1),p(2,"router-outlet"),t()())},dependencies:[z],encapsulation:2})}}return e})();var X=(()=>{class e{constructor(a){this.accountService=a,this.account=this.accountService.accountValue}static{this.\u0275fac=function(s){return new(s||e)(c(b))}}static{this.\u0275cmp=_({type:e,selectors:[["ng-component"]],decls:13,vars:4,consts:[["routerLink","update"]],template:function(s,n){s&1&&(i(0,"h1"),r(1,"My Profile"),t(),p(2,"br"),i(3,"strong"),r(4,"Name: "),t(),r(5),p(6,"br"),i(7,"strong"),r(8,"Email: "),t(),r(9),i(10,"p")(11,"a",0),r(12,"Update Profile"),t()()),s&2&&(o(5),M(" ",n.account.title," ",n.account.firstName," ",n.account.lastName,""),o(4),w(" ",n.account.email," "))},dependencies:[S],encapsulation:2})}}return e})();var g=e=>({"is-invalid":e});function te(e,l){e&1&&(i(0,"div"),r(1,"Title is required"),t())}function ie(e,l){if(e&1&&(i(0,"div",18),d(1,te,2,0,"div",19),t()),e&2){let a=u();o(),m("ngIf",a.f.title.errors.required)}}function ne(e,l){e&1&&(i(0,"div"),r(1,"First Name is required"),t())}function re(e,l){if(e&1&&(i(0,"div",18),d(1,ne,2,0,"div",19),t()),e&2){let a=u();o(),m("ngIf",a.f.firstName.errors.required)}}function oe(e,l){e&1&&(i(0,"div"),r(1,"Last Name is required"),t())}function ae(e,l){if(e&1&&(i(0,"div",18),d(1,oe,2,0,"div",19),t()),e&2){let a=u();o(),m("ngIf",a.f.lastName.errors.required)}}function me(e,l){e&1&&(i(0,"div"),r(1,"Email is required"),t())}function se(e,l){e&1&&(i(0,"div"),r(1,"Email must be a valid email address"),t())}function le(e,l){if(e&1&&(i(0,"div",18),d(1,me,2,0,"div",19)(2,se,2,0,"div",19),t()),e&2){let a=u();o(),m("ngIf",a.f.email.errors.required),o(),m("ngIf",a.f.email.errors.email)}}function de(e,l){e&1&&(i(0,"div"),r(1,"Password is required"),t())}function pe(e,l){e&1&&(i(0,"div"),r(1," Password must be at least 6 characters "),t())}function ce(e,l){if(e&1&&(i(0,"div",18),d(1,de,2,0,"div",19)(2,pe,2,0,"div",19),t()),e&2){let a=u();o(),m("ngIf",a.f.password.errors.required),o(),m("ngIf",a.f.password.errors.minlength)}}function ue(e,l){e&1&&(i(0,"div"),r(1,"Confirm Password is required"),t())}function fe(e,l){e&1&&(i(0,"div"),r(1,"Passwords must match"),t())}function ve(e,l){if(e&1&&(i(0,"div",18),d(1,ue,2,0,"div",19)(2,fe,2,0,"div",19),t()),e&2){let a=u();o(),m("ngIf",a.f.confirmPassword.errors.required),o(),m("ngIf",a.f.confirmPassword.errors.mustMatch)}}function _e(e,l){e&1&&p(0,"span",20)}function ge(e,l){e&1&&p(0,"span",20)}var Y=(()=>{class e{constructor(a,s,n,E,$){this.formBuilder=a,this.route=s,this.router=n,this.accountService=E,this.alertService=$,this.account=this.accountService.accountValue,this.loading=!1,this.submitted=!1,this.deleting=!1}ngOnInit(){this.form=this.formBuilder.group({title:[this.account.title,v.required],firstName:[this.account.firstName,v.required],lastName:[this.account.lastName,v.required],email:[this.account.email,[v.required,v.email]],password:["",[v.minLength(6)]],confirmPassword:[""]},{validator:K("password","confirmPassword")})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.update(this.account.id,this.form.value).pipe(x()).subscribe({next:()=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})},error:a=>{this.alertService.error(a),this.loading=!1}}))}onDelete(){confirm("Are you sure?")&&(this.deleting=!0,this.accountService.delete(this.account.id).pipe(x()).subscribe(()=>{this.alertService.success("Account deleted successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/profile"])}))}static{this.\u0275fac=function(s){return new(s||e)(c(G),c(B),c(H),c(b),c(J))}}static{this.\u0275cmp=_({type:e,selectors:[["ng-component"]],decls:53,vars:29,consts:[[3,"ngSubmit","formGroup"],[1,"form-group"],["formControlName","title",1,"form-control",3,"ngClass"],["value",""],["value","Mr"],["value","Mrs"],["value","Ms"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","col-5"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click","disabled"],["routerLink","/profile",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(s,n){s&1&&(i(0,"h1"),r(1,"Update Profile"),t(),i(2,"form",0),N("ngSubmit",function(){return n.onSubmit()}),i(3,"div",1)(4,"label"),r(5,"Title"),t(),i(6,"select",2),p(7,"option",3),i(8,"option",4),r(9,"Mr"),t(),i(10,"option",5),r(11,"Mrs"),t(),i(12,"option",6),r(13,"Ms"),t()(),d(14,ie,2,1,"div",7),t(),i(15,"div",8)(16,"label"),r(17,"First Name"),t(),p(18,"input",9),d(19,re,2,1,"div",7),t(),i(20,"div",8)(21,"label"),r(22,"Last Name"),t(),p(23,"input",10),d(24,ae,2,1,"div",7),t(),i(25,"div",1)(26,"label"),r(27,"Email"),t(),p(28,"input",11),d(29,le,3,2,"div",7),t(),i(30,"h3"),r(31,"Change Password"),t(),i(32,"p"),r(33,"Leave blank to keep the same password"),t(),i(34,"div",1)(35,"label"),r(36,"Password"),t(),p(37,"input",12),d(38,ce,3,2,"div",7),t(),i(39,"div",1)(40,"label"),r(41,"Confirm Password"),t(),p(42,"input",13),d(43,ve,3,2,"div",7),t(),i(44,"div",1)(45,"button",14),d(46,_e,1,0,"span",15),r(47," Save "),t(),i(48,"button",16),N("click",function(){return n.onDelete()}),d(49,ge,1,0,"span",15),r(50," Delete "),t(),i(51,"a",17),r(52,"Cancel"),t()()()),s&2&&(o(2),m("formGroup",n.form),o(4),m("ngClass",f(17,g,n.submitted&&n.f.title.errors)),o(8),m("ngIf",n.submitted&&n.f.title.errors),o(4),m("ngClass",f(19,g,n.submitted&&n.f.firstName.errors)),o(),m("ngIf",n.submitted&&n.f.firstName.errors),o(4),m("ngClass",f(21,g,n.submitted&&n.f.lastName.errors)),o(),m("ngIf",n.submitted&&n.f.lastName.errors),o(4),m("ngClass",f(23,g,n.submitted&&n.f.email.errors)),o(),m("ngIf",n.submitted&&n.f.email.errors),o(8),m("ngClass",f(25,g,n.submitted&&n.f.password.errors)),o(),m("ngIf",n.submitted&&n.f.password.errors),o(4),m("ngClass",f(27,g,n.submitted&&n.f.confirmPassword.errors)),o(),m("ngIf",n.submitted&&n.f.confirmPassword.errors),o(2),m("disabled",n.loading),o(),m("ngIf",n.loading),o(2),m("disabled",n.loading),o(),m("ngIf",n.deleting))},dependencies:[U,T,k,A,V,F,j,q,D,L,R,S],encapsulation:2})}}return e})();var Ce=[{path:"",component:W,children:[{path:"",component:X},{path:"update",component:Y}]}],Z=(()=>{class e{static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275mod=h({type:e})}static{this.\u0275inj=C({imports:[I.forChild(Ce),I]})}}return e})();var Ge=(()=>{class e{static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275mod=h({type:e})}static{this.\u0275inj=C({imports:[P,O,Z]})}}return e})();export{Ge as ProfileModule};
